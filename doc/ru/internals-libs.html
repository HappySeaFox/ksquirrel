<html><head><title>Свои библиотеки</title><link rel="stylesheet" href="help:/common/kde-default.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.48"><meta name="keywords" content="KDE, image, viewer, picture"><meta http-equiv="Content-Type" content="text/html; charset=KOI8-R"><meta name="GENERATOR" content="KDE XSL Stylesheet V1.13 using libxslt"><link rel="home" href="index.html" title="KSquirrel Руководство Пользователя"><link rel="up" href="internals.html" title="Глава 2. Отличие KSquirrel от других просмотрщиков. Свои библиотеки"><link rel="previous" href="internals.html" title="Глава 2. Отличие KSquirrel от других просмотрщиков. Свои библиотеки"><link rel="next" href="interface.html" title="Глава 3. Интерфейс"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr class="header"><td colspan="2"> </td></tr><tr id="logo"><td valign="top"><img src="help:/common/kde_logo.png" alt="KDE -         The K Desktop Environment" width="296" height="79" border="0"></td><td valign="middle" align="center" id="location"><h1>Свои библиотеки</h1></td></tr></table><table width="100%" class="header"><tbody><tr><td align="left" class="navLeft" width="33%"><a accesskey="p" href="internals.html">Пред.</a></td><td align="center" class="navCenter" width="34%">Отличие KSquirrel от других просмотрщиков. Свои библиотеки</td><td align="right" class="navRight" width="33%"> 
		      <a accesskey="n" href="interface.html">След.</a></td></tr></tbody></table><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="internals-libs"></a>Свои библиотеки</h2></div></div><p>Почти во всех программах просмотра изображений для декодирования используются сторонние библиотеки. Примером могут служить такие библиотеки как imlib (Image Magic) и Qt. На первый взгляд, преимущества такого способа очевидны - это перекладывание головной боли по декодирования изображений на другие библиотеки, вообще абстрагируясь от низкого уровня работы с изображениями, альфа каналов, битовых масок, RLE кодирования и прочего. Но у этого способа есть несколько очевидных недостатков. К ним причисляется, во-первых, частичное отсутствие расширяемости набора кодеков изображений. Во-вторых, это зависимость кодеков от больших (а иногда очень больших) библиотек, типа Qt. В-третьих, отсутствие поддержки анимаций, типа GIF или MNG. В-четвёртых, отсутствие возможности декодирования отдельных строк.</p><p>
Исходя из всех этих недостатков, было решено отказаться от помощи сторонних библиотек и разработать собственные библиотеки, которые могли бы не зависеть от других библиотек, кроме стандартных или требуемых самими кодеками (такие, как libsvg, libmng), загружаться динамически, быть полностью расширяемыми, поддерживать декодирование строк и анимацию. Эти библиотеки получили название &#8220;ksquirrel-libs&#8221;.
</p><p>
На момент написания данной документации ksquirrel-libs поддерживал 41 формат изображений, включая PNG, JPEG, PSD, WMF, SVG, MNG и GIF. Имеются также кодеки для поддержки файлов шрифтов TTF, анимаций FLI и X-овых курсоров.
</p><p>
ksquirrel-libs поддерживает также текстовые поля (комментарии и др.), сохраняемые в некоторых типах изображений. Например, PNG и GIF кодеки способны читать комментарии из данных типов файлов.
</p><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="internals-specific"></a>Работа KSquirrel с библиотеками</h3></div></div><p>
Благодаря вышеуказанным свойствам библиотек ksquirrel-libs, KSquirrel приобретает следущие особенности:

<div class="orderedlist"><ol type="1"><li><p>KSquirrel практически не знает, какой кодек будет использован для декодирования изображения - это определяется динамически.</p></li><li><p>KSquirrel практически не знает, сколько страниц в декодируемом изображении и является ли оно анимацией - это определяется динамически.</p></li><li><p>Догрузка и выгрузка библиотек полностью динамическая. Это означает, что библиотеки можно добавлять даже во время работы в KSquirrel</p></li><li><p>Благодаря поддержке декодирования отдельных строк, KSquirrel показывает изображения прогрессивно, т.е. по мере декодирования.</p></li></ol></div>
</p><p>Когда KSquirrel загрузил все найденные библиотеки (используя Qt класс QLibrary), появляется возможность отображать любые поддерживанмые типы изображений (как статичных, так и анимированных). Когда пользователь кликает по файлу изображения в навигаторе, KSquirrel по MIME типу либо расширению файла определяет, поддерживается ли данный формат изображения. Если данный формат поддерживается, то, используя найденную библиотеку, KSquirrel приступает к декодированию изображения и отображению его в окне просмотра.</p><p>Информацию о всех найденных кодеках можно просмотеть в диалоге &#8220;Информация о плагинах&#8221;, как показано на скриншоте.</p><div class="screenshot"><div xmlns:doc="http://nwalsh.com/xsl/documentation/1.0" class="mediaobject"><hr><img src="plugins_info.png" alt="Информация по найденным кодекам"><hr></div></div></div></div><table width="100%" class="bottom-nav"><tr><td width="33%" align="left" valign="top" class="navLeft"><a href="internals.html">Пред.</a></td><td width="34%" align="center" valign="top" class="navCenter"><a href="index.html">Начало</a></td><td width="33%" align="right" valign="top" class="navRight"><a href="interface.html">След.</a></td></tr><tr><td width="33%" align="left" class="navLeft">Отличие KSquirrel от других просмотрщиков. Свои библиотеки </td><td width="34%" align="center" class="navCenter"><a href="internals.html">Уровень выше</a></td><td width="33%" align="right" class="navRight"> Интерфейс</td></tr></table></body></html>